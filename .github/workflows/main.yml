on:
  workflow_dispatch:
    inputs:
      test:
        description: 'some input'
        type: choice
        options:
        - thing1
        - thing2

jobs:
  foo:
    runs-on: ubuntu-latest
    env:
      PAT: ${{ secrets.pat }}
    steps:
      - name: test
      - if: ${{ env.PAT != '' }}
        run: |
          curl \
          -X POST \
          -H "Accept: application/vnd.github+json" \ 
          -H "Authorization: token $PAT" \
          --url https://api.github.com/repos/marvjohnson/test-action/actions/workflows/test.yml/dispatches \
          -d '{"ref":"topic-branch","inputs":{"name":"Mona the Octocat","home":"San Francisco, CA"}}'
      - if: ${{ env.PAT == '' }}
        run: echo 'env is empty!'
